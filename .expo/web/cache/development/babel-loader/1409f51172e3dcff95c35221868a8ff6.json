{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nvar _jsxFileName = \"C:\\\\Users\\\\haria\\\\SIMphony\\\\src\\\\components\\\\NewCalendar.js\";\nimport React from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport View from \"react-native-web/dist/exports/View\";\nimport moment from 'moment';\nimport EventCalendar from \"./EventCalendar\";\nimport _ from 'lodash';\nimport { MY_VARIABLE } from \"../constants\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar Lecture = function Lecture(start, end, title, summary) {\n  _classCallCheck(this, Lecture);\n\n  this.start = start;\n  this.end = end;\n  this.title = title;\n  this.summary = summary;\n};\n\nvar NewCalendar = function (_React$Component) {\n  _inherits(NewCalendar, _React$Component);\n\n  function NewCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, NewCalendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewCalendar).call(this, props));\n    _this.state = {\n      events: [],\n      isLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(NewCalendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getICS();\n    }\n  }, {\n    key: \"getICS\",\n    value: function getICS() {\n      var _this2 = this;\n\n      fetch('https://studentcal.simge.edu.sg/SIMCalendar/5b2ce3d901680312e0530ac45c0b98e8.ics').then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        _this2.getLectures(data);\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n  }, {\n    key: \"getLectures\",\n    value: function getLectures(res) {\n      var modulesTakenThisYear = [];\n      var lectures = [];\n      var lines = res.split('\\n');\n      var lectures_i = 0;\n\n      String.prototype.splice = function (idx, rem, str) {\n        return this.slice(0, idx) + str + this.slice(idx + Math.abs(rem));\n      };\n\n      var moment = require('moment');\n\n      for (i = 0; i < lines.length; i++) {\n        var starttime, endtime, name, location;\n\n        if (lines[i].includes('DTSTART;')) {\n          var starttimeline = lines[i].split(':');\n          starttime = starttimeline[1].trim();\n          starttime = moment(starttime).utc().format('YYYY-MM-DD HH:mm:ss');\n          lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n        } else if (lines[i].includes('SUMMARY')) {\n          var nameline = lines[i].split(':');\n          name = nameline[1];\n          lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n\n          if (!modulesTakenThisYear.includes(name)) {\n            modulesTakenThisYear.push(name);\n          }\n        } else if (lines[i].includes('DTEND;')) {\n          var endtimeline = lines[i].split(':');\n          endtime = endtimeline[1].trim();\n          endtime = moment(endtime).utc().format('YYYY-MM-DD HH:mm:ss');\n          lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n        } else if (lines[i].includes('LOCATION')) {\n          var locline = lines[i].split(':');\n          location = locline[1];\n          lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n          lectures_i++;\n        }\n      }\n\n      for (i = 0; i < modulesTakenThisYear.length; i++) {\n        MY_VARIABLE.push(modulesTakenThisYear[i]);\n      }\n\n      for (i = 0; i < lectures.length; i++) {\n        this.state.events.push({\n          end: lectures[i].end,\n          start: lectures[i].start,\n          summary: lectures[i].summary,\n          title: lectures[i].title\n        });\n      }\n\n      ;\n    }\n  }, {\n    key: \"_eventTapped\",\n    value: function _eventTapped(event) {\n      alert(JSON.stringify(event));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(MY_VARIABLE);\n      return React.createElement(EventCalendar, {\n        eventTapped: this._eventTapped.bind(this),\n        events: this.state.events,\n        width: width,\n        initDate: new Date(),\n        scrollToFirst: true,\n        upperCaseHeader: true,\n        uppercase: true,\n        scrollToFirst: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        }\n      });\n    }\n  }]);\n\n  return NewCalendar;\n}(React.Component);\n\nexport { NewCalendar as default };","map":{"version":3,"sources":["C:/Users/haria/SIMphony/src/components/NewCalendar.js"],"names":["React","moment","EventCalendar","_","MY_VARIABLE","Dimensions","get","width","Lecture","start","end","title","summary","NewCalendar","props","state","events","isLoading","getICS","fetch","then","response","text","data","getLectures","catch","error","console","res","modulesTakenThisYear","lectures","lines","split","lectures_i","String","prototype","splice","idx","rem","str","slice","Math","abs","require","i","length","starttime","endtime","name","location","includes","starttimeline","trim","utc","format","nameline","push","endtimeline","locline","event","alert","JSON","stringify","log","_eventTapped","bind","Date","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Dimensions, View } from 'react-native';\nimport moment from 'moment';\nimport EventCalendar from './EventCalendar';\nimport _ from 'lodash';\nimport {MY_VARIABLE } from '../constants';\n\nlet { width } = Dimensions.get('window');\n\nclass Lecture {\n    constructor(start, end, title, summary) {\n        this.start = start;\n        this.end = end;\n        this.title = title;\n        this.summary = summary;\n    }\n}\n\nexport default class NewCalendar extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            events: [\n\n                // {\n                //     end: '2019-11-07 11:30:00',\n                //     start: '2019-11-07 08:30:00',\n                //     summary: 'HQ BLK A LT A.2.08',\n                //     title: 'Software Eng Proj Mgmt',\n                //     color: 'green',\n                // },\n\n            ],\n\n            isLoading: false,\n\n            // modulesNamesToPassToMaterialsTab: [\n\n            // ],\n\n        };\n\n    }\n\n    componentDidMount() {\n        this.getICS();\n    }\n\n    getICS() {\n\n        fetch('https://studentcal.simge.edu.sg/SIMCalendar/5b2ce3d901680312e0530ac45c0b98e8.ics')\n            .then(response => response.text())\n            .then(data => {\n                this.getLectures(data)\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    }\n\n    getLectures(res) {\n        var modulesTakenThisYear = [];\n        var lectures = [];\n        var lines = res.split('\\n');\n        var lectures_i = 0;\n\n        String.prototype.splice = function (idx, rem, str) {\n            return this.slice(0, idx) + str + this.slice(idx + Math.abs(rem));\n        };\n\n        var moment = require('moment');\n\n        for (i = 0; i < lines.length; i++) {\n            var starttime, endtime, name, location;\n\n            if (lines[i].includes('DTSTART;')) {\n                var starttimeline = lines[i].split(':');\n                starttime = starttimeline[1].trim();\n                starttime = moment(starttime).utc().format('YYYY-MM-DD HH:mm:ss');\n                lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n                // lectures[lectures_i] = { starttime, endtime, name, location };\n\n\n            }\n\n            else if (lines[i].includes('SUMMARY')) {\n                var nameline = lines[i].split(':');\n                name = nameline[1];\n                lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n                // lectures[lectures_i] = { starttime, endtime, name, location };\n                \n                if (!modulesTakenThisYear.includes(name)) {\n                     // to get all modules that are taken this year, will be used for web scraping in the materials tab\n                    modulesTakenThisYear.push(name);\n                }\n            }\n\n            else if (lines[i].includes('DTEND;')) {\n                var endtimeline = lines[i].split(':');\n                endtime = endtimeline[1].trim();\n                endtime = moment(endtime).utc().format('YYYY-MM-DD HH:mm:ss');\n                lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n                // lectures[lectures_i] = { starttime, endtime, name, location };\n            }\n\n            else if (lines[i].includes('LOCATION')) {\n                var locline = lines[i].split(':');\n                location = locline[1];\n                lectures[lectures_i] = new Lecture(starttime, endtime, name, location);\n                // lectures[lectures_i] = { starttime, endtime, name, location };\n                lectures_i++;\n            }\n\n        }\n\n\n        for (i = 0; i < modulesTakenThisYear.length; i++) {\n            MY_VARIABLE.push(\n                modulesTakenThisYear[i],\n            );\n        }\n\n        for (i = 0; i < lectures.length; i++) {\n            this.state.events.push(\n                {\n                    end: lectures[i].end,\n                    start: lectures[i].start,\n                    summary: lectures[i].summary,\n                    title: lectures[i].title,\n                },\n            );\n        };\n        // console.log(this.state.modulesNamesToPassToMaterialsTab);\n    };\n\n\n    _eventTapped(event) {\n        alert(JSON.stringify(event));\n    }\n\n    render() {\n        console.log(MY_VARIABLE);\n        return (\n            // <View style={{ flex: 1, marginTop: 15 }}>\n                <EventCalendar\n                    eventTapped={this._eventTapped.bind(this)}\n                    events={this.state.events}\n                    width={width}\n                    initDate={new Date()}\n                    scrollToFirst\n                    upperCaseHeader\n                    uppercase\n                    scrollToFirst={true}\n                />\n            // </View>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}